# Java 简介
java并不只是一种语言，它是一个完整的平台，有一个庞大的库，其中包含了很多可重用的代码，以及一个提供诸如安全性、跨操作系统的可移植性以及自动垃圾收集等服务的执行环境。

## java安装

1、下载jdk并设置环境变量

下载地址：https://www.oracle.com/java/technologies/downloads/

环境变量设置为“java安装目录\bin”，环境变量只需要在用户级别下设置即可，系统级别不要设置。linux和windows都是这样。

设置好环境变量后，终端窗口键入javac --version检验是否安装成功。

2、安装类库源文件

类库源文件（源码）在jdk中以压缩文件的形式发布，将其解压缩后才能访问源代码。其目录为““java安装目录\lib\src.zip”。

3、安装文档

下载地址：https://www.oracle.com/java/technologies/downloads/

文档是一个独立于jdk的压缩文件，下载地址与jdk在同一个页面。

## 使用命令行编译和运行java程序

https://docs.oracle.com/en/java/javase/17/docs/specs/man/index.html

## javac程序

```shell
javac javaFileName.java
```

javac程序是一个java编译器。`javaFileName`是一个java源文件名，因为是源文件名，所以后面一定要加.java后缀。执行这个命令后，会在源文件的目录下多出来一个字节码文件`javaFileName.class`。

使用`--debug=verboseResolution=all`选项可以查看参数类型。

`-d`选项用来设置类文件的输出目录（目标目录），目录不存在则会创建该目录。如果类是包的一部分，则`javac`会将类文件放入反映模块名称（如果适用）和包名称的子目录中。如果没有`-d`选项，则`javac`将每个类文件放在与源文件相同的目录中。

对于模块化程序，除了编译`.java`源文件外，还需要同时编译模块声明文件`module-info.java`。

`-p`选项用于指定模块依赖的其他模块（可以是模块路径也可以是`.jar`路径）。



## java程序

```shell
java javaClassName
```

java程序启动java虚拟机，虚拟机执行编译器编译到类文件中的字节码。javaClassName是java类名，所以后面不需要添加任何后缀。



### 模块化程序的执行

执行模块化程序时，必须使用`-p`或`--module-path`选项指定模块基目录的路径（也就是模块目录的所在的目录）。`-p`选项的参数可以是`.`，代表当前目录。

`-m`或`--module`选项指定主类（"模块名/类名"格式，不能是反斜杠`\`）。其中模块名中不能是路径形式，只能是具体的模块名称，因为`-p`或`--module-path`选项已经指定了模块基目录的路径。



## jar命令

1、`-c`命令是主操作模式，用于指示：创建`.jar`文件，但是后面不跟参数。一般在后面跟一个`-f`选项来指定输出的`.jar`文件路径。

2、`-f`选项是在任何主操作模式下都可以使用的选项，用来指定`.jar`文件路径。

3、`-v`选项用来输出详细的创建过程记录。

4、`-d`选项用于打印`.jar`文件中的模块信息，但是后面不跟参数。一般在后面跟一个`-f`选项来指定输出的`.jar`文件路径。

5、`-e`选项指定捆绑到可执行模块化jar文件中的程序入口点（主类）。主类的名称应该是完全限定类名（即包含包名），但不应包含路径名和模块名，因为路径就是jar文件路径。

指定了程序入口点的jar文件，双击可以直接运行；否则不能执行。

## javap程序

反编译程序

```shell
javap -verbose javaClassName
```

如果发现反编译后的类中没有局部变量表`LocalVariableTable`，则重新编译java文件：

```shell
javac -g:vars javaFileName.java
```

# java特点

1、简单性

Java语法可以说是c++语法的一个纯净版本，它剔除了c++中许多特性：头文件、指针、结构、联合、操作符重载、虚基类等。这些特性带来的麻烦远远多于它们的好处。

简单所以小，Java的目标之一是支持能够在小型机器上独立运行的软件开发。基本的解释器以及类支持大约仅为40KB，再加上基础的标准类库和对线程的支持（基本上是一个自包含的微内核），大概需要增加175KB。

现在由于不断的扩展，类库已经相当庞大了。但是仍然有一个独立的较小类库的java微型版（java Micro Edition），这个版本适用于嵌入式设备。



2、面向对象

面向对象的程序设计技术将重点放在数据（即对象）和对象的接口上。用木匠打比方，"面向对象"的木匠始终首先关注的是所制作的椅子，其次才是所使用的工具；"非面向对象"的木匠主要考虑的是所用的工具。

Java的面向对象特性与c++旗鼓相当，主要不同点在于：c++的多重继承被Java中更简单的接口替代。



3、分布式

java有一个丰富的例程库，用于处理像HTTP和FTP之类的TCP/IP协议。java应用程序能够通过URL打开和访问网络上的对象，其便捷程度就好像访问本地文件一样。

如今，这一点被认为是理所当然的。但是在1995年，主要还是从c++或Visual Basic程序连接Web服务器。



4、健壮性

java的设计目标之一在于使得java编写的程序具有多方面的可靠性。java非常强调进行早期的问题检测、后期动态的（运行时）检测，以及消除容易出错的情况......java与c++最大的不同在于java采用的指针模型可以消除重写内存和损坏数据的可能性。

java编译器能够检测许多在其它语言中仅在运行时才能够检测出来的问题。



5、安全性

java要适用于网络/分布式环境。为了实现这个目标，安全性颇受重视。使用java可以构建防病毒、防篡改的系统。

从一开始，java就被设计成能够防范各种攻击，包括：（1）运行时堆栈溢出，这是蠕虫和病毒常用的攻击手段；（2）破坏自己的进程空间之外的内存；（3）未经授权读写文件......

原先，java对下载代码的态度是“尽管来吧！”。不可信代码在一个沙箱环境中执行，在这里它不会影响主系统。用户可以确信不会发生不好的事情，因为java代码不论来自哪里，都不能脱离沙箱。

但是JDK第一版发布后，很快就被发现一些小bug会允许不可信的代码攻击主系统。虽然bug很快被修复，但是之后的Sun以及Oracle公司为不断修复安全bug经历了一段很是艰难的日子。

遭遇多次高调攻击后，浏览器开发商和Oracle开始越来越谨慎。java浏览器插件不再信任远程代码，除非代码有数字签名而且用户同意执行这个代码。

与之相比，微软提供了一种与之竞争的代码交付机制，其安全性完全依赖于数字签名。显然这是不够的，因为微软自身产品的任何用户都可以证实，一些知名开发商的程序确实会崩溃并对系统产生危害。

现在看来，尽管java安全模型并没有原先预想的那么成功，但java在那个时代确实相当超前。



 6、体系结构中立

编译器生成一个体系结构中立的目标文件格式，这是一种编译过的代码，只要有java运行时系统，这些编译后的代码可以在许多处理器上运行。java编译器通过生成与特定的计算机体系结构无关的字节码指令来实现这一特性。

精心设计的字节码不仅可以很容易地在任何机器上解释执行，而且还可以动态地转换成本地机器代码。

当时，虚拟机生成代码并不是一个新思路。当然，解释型虚拟机指令肯定会比全速运行机器指令慢很多。但虚拟机有一个选项，可以将执行最频繁地字节码序列转换成机器码，这一过程称为即时编译。

java虚拟机还有一些其他优点，比如可以检查指令序列的行为，从而增强安全性。



7、可移植性

与c或c++不同，java规范中没有"依赖具体实现"的地方：基本数据类型的大小以及有关运算的行为都有明确的说明。

例如，java中的int始终未32位整数。而在c/c++中，int可能是16位整数、32位整数，也可能是编译器开发商指定的任何其他大小，唯一的限制只是int类型的字节数不能低于short int，并且不能高于long int。

在java中，数值类型有固定的字节数，这消除了代码移植时令人头痛的主要问题。

二进制数据以固定的格式进行存储和传输，消除了字节顺序的困扰。字符串则采用标准的Unicode格式存储。

作为系统组成部分的类库，定义了可移植的接口。例如，有一个抽象的Window类，并给出了在UNIX、Windows和Macintosh环境下的不同实现。

凡是尝试过的人都知道，要编写一个在Windows、Macintosh和10种不同风格的UNIX上看起来都不错的程序有多么困难。Java尝试过类似的壮举，但用户界面工具包的跨平台可移植性仍然是个问题。

不过，除了与用户界面有关的部分外，所有其他java库确实能很好地支持平台独立性。你可以处理文件、正则表达式、XML、日期与时间、数据库、网络连接、线程等，而不用操心底层操作系统。



8、解释型

java解释器可以在任何移植了解释器的机器上直接执行java字节码。

字节码可以在运行时动态地转换成对应运行这个应用的特定CPU的机器码。



9、高性能

早期的java是解释型的，但现在java虚拟机使用了即时编译器，性能已经非常出色，可以与传统编译器媲美，而且在某些情况下甚至超越了传统编译器，因为它们有更多的可用信息。

比如，即时编译器可以监控哪些代码频繁执行，并优化这些代码以提高速度。更为复杂的优化是消除函数调用（即“内联”）。即时编译器知道哪些类已经加载。基于当前加载的类集合，如果一个特定的函数不会被覆盖，就可以使用内联。必要时，以后还可以撤销这种优化。

采用java编写的"热点"代码运行速度与c++相差无几，有些情况下甚至更快。



10、多线程

java是第一个支持并发程序设计的主流语言。当时，多核处理器还很神秘，而Web编程才刚刚起步，处理器需要花很长时间等待服务器响应，需要并发程序设计来确保用户界面不会"冻住"。



11、动态性

Java与c/c++相比更加具有动态性。它能够适应不断发展的环境。库中可以自由地添加新方法和实例变量，而对客户端却没有任何影响。

在Java种找出运行时类型信息十分简单。

当需要为正在运行的程序增加代码时，动态性将是一个非常重要的特性。一个很好的例子是：从Internet下载代码，然后在浏览器上运行。如果使用c/c++，这确实难度很大。



Java成功推出后不久，微软就发布了一个叫作J++的产品，它与java有几乎相同的编程语言和虚拟机，现在被C#替代。

C#与Java有很多相似之处，不过在一个不同的虚拟机上运行。

# java相关术语



## JDK

Java Development Kit，java开发工具包。

## JRE

Java Runtiome Environment，java运行时环境。运行java程序的用户使用的软件。

## Sever JRE

在服务器上运行java程序的软件。

## Java SE

SE：Standard Edition，标准版。用于桌面或简单服务器应用的java平台。

## Java EE

EE：Enterprise Edition，企业版。用于复杂服务器应用的java平台。

## Java ME

ME：Micro Edition，微型版。用于小型设备的java平台。

## JAR

Java Archive，java归档。

在一个JAR文件中，可以包含多个压缩形式的类文件和子目录，这样既节省空间又能改善性能。

## Java 本地方法

本地方法（Native Methods）是Java中的一种机制，允许Java应用程序调用由本地库（通常是C或C++编写的库）实现的方法。本地方法的主要用途是与底层系统、硬件或其他编程语言进行交互，或者执行性能关键的操作。本地方法通常涉及到对JNI（Java Native Interface）的使用，JNI允许Java代码与本地代码之间进行互操作。

